webpackJsonp([1],{"9fOA":function(t,e){},EG02:function(t,e){},H90q:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),n=a("mvHQ"),r=a.n(n),o={name:"TableRow",props:{rowData:Object,depth:Number},data:function(){return{showChildren:!1,indentMultiplier:25,depthCounter:1}},computed:{itemHasChildren:function(){return{"has-children":this.rowData.subordinates.length}},indent:function(){return{marginLeft:1*this.depth+"px"}}},methods:{toggleChildren:function(){this.showChildren=!this.showChildren}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table__body-container"},[a("tr",{staticClass:"table__body-row table__body-row--main"},[a("td",{staticClass:"table__body-item table__body-item--name",class:t.itemHasChildren,style:{marginLeft:this.indentMultiplier*this.depth+"px"},on:{click:function(e){return t.toggleChildren()}}},[t._v("\n      "+t._s(t.rowData.name)+"\n    ")]),t._v(" "),a("td",{staticClass:"table__body-item table__body-item--phone"},[t._v(t._s(t.rowData.phone_number))])]),t._v(" "),t.showChildren?a("tr",{staticClass:"table__body-row table__body-row--subordinates"},t._l(t.rowData.subordinates,function(e,s){return a("TableRow",{key:s,attrs:{rowData:e,depth:t.depth+t.depthCounter}})}),1):t._e()])},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(t){a("H90q")},null,null).exports,d=this,u={name:"AddUserModal",props:{parsedUsersData:Array},data:function(){return{parsedUsersDataCopy:d.parsedUsersData}},methods:{tableModalCloseBtnClick:function(){this.$emit("tableModalCloseBtnClick")},sendFormValues:function(t){this.$emit("tableModalSaveBtnClick",{name:t.target.elements.name.value,phone_number:t.target.elements.phone.value,chiefId:t.target.elements.chief.value}),this.$refs.addModal__form.reset()}},computed:{}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addModal"},[a("div",{staticClass:"addModal__heading"},[a("h3",[t._v("Добавление пользователя")]),t._v(" "),a("span",{staticClass:"addModal__heading--close",on:{click:t.tableModalCloseBtnClick}},[t._v("x")])]),t._v(" "),a("form",{ref:"addModal__form",staticClass:"addModal__form",on:{submit:function(e){return e.preventDefault(),t.sendFormValues(e)}}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"addModal__form-item"},[a("label",{attrs:{for:"chief"}},[t._v("Начальник")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.parsedUsersDataCopy,expression:"parsedUsersDataCopy"}],attrs:{name:"chief"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.parsedUsersDataCopy=e.target.multiple?a:a[0]}}},t._l(t.parsedUsersData,function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.name))])}),0)]),t._v(" "),a("input",{staticClass:"btn save-btn",attrs:{type:"submit",value:"Отправить"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addModal__form-item"},[e("label",{attrs:{for:"name"}},[this._v("Имя")]),this._v(" "),e("input",{attrs:{type:"text",name:"name"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addModal__form-item"},[e("label",{attrs:{for:"phone"}},[this._v("Телефон")]),this._v(" "),e("input",{attrs:{type:"text",name:"phone"}})])}]};var h=a("VU/8")(u,c,!1,function(t){a("EG02")},null,null).exports,p={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"add-btn btn",on:{click:this.tableModalOpenBtnClick}},[this._v("Добавить")])},staticRenderFns:[]};var _=a("VU/8")({name:"AddUserButton",methods:{tableModalOpenBtnClick:function(){this.$emit("tableModalOpenBtnClick")}}},p,!1,function(t){a("ibF9")},null,null).exports,m={name:"Table",props:{usersData:Array},components:{TableRow:l,UserModal:h,UserAddButton:_},data:function(){return{tableModalIsVisible:!1,parsedUsersData:[]}},computed:{getParsedUsersData:function(){return this.parsedUsersData.length=0,this.parseArrayData(this.getUsersData)},getParsedUsersDataLength:function(){return this.parsedUsersData.length},getUsersData:function(){return JSON.parse(localStorage.getItem("usersData"))||this.usersData}},watch:{usersData:function(t,e){localStorage.setItem("usersData",r()(this.usersData))}},methods:{sortByName:function(){this.getUsersData.sort(function(t,e){return t.name.localeCompare(e.name)})},sortByPhone:function(){this.getUsersData.sort(function(t,e){return t.phone.localeCompare(e.phone)})},showTableModal:function(){this.tableModalIsVisible=!0},closeTableModal:function(){this.tableModalIsVisible=!1},saveDataToLocalStorage:function(){localStorage.setItem("usersData",r()(this.getUsersData))},parseArrayData:function(t){var e=this;return t.map(function(t){e.parsedUsersData.push(t),t.subordinates&&e.parseArrayData(t.subordinates)})},saveTableModalData:function(t){var e={id:this.getParsedUsersDataLength+1,name:t.name,phone_number:t.phone,subordinates:[]};this.getUsersData.forEach(function(a,s){for(a.id===+t.chiefId&&a.subordinates.push(e);a.subordinates.length;)a.subordinates[0].id===+t.chiefId&&a.subordinates[0].subordinates.push(e),a=a.subordinates[0]}),this.saveDataToLocalStorage()}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-section"},[a("UserAddButton",{on:{tableModalOpenBtnClick:t.showTableModal,click:t.getParsedUsersData}}),t._v(" "),a("div",{staticClass:"table"},[a("thead",{staticClass:"table__header"},[a("tr",{staticClass:"table__header-row"},[a("th",{staticClass:"table__header-item",on:{click:t.sortByName}},[a("h3",[t._v("Имя")])]),t._v(" "),a("th",{staticClass:"table__header-item",on:{click:t.sortByPhone}},[a("h3",[t._v("Телефон")])])])]),t._v(" "),a("tbody",{staticClass:"table__body"},t._l(t.getUsersData,function(t,e){return a("TableRow",{key:e,attrs:{rowData:t,depth:0}})}),1)]),t._v(" "),t.tableModalIsVisible?a("UserModal",{attrs:{parsedUsersData:t.parsedUsersData},on:{tableModalCloseBtnClick:t.closeTableModal,tableModalSaveBtnClick:t.saveTableModalData}}):t._e()],1)},staticRenderFns:[]};var f={name:"App",components:{Table:a("VU/8")(m,b,!1,function(t){a("9fOA")},null,null).exports},data:function(){return{usersData:[{id:1,name:"Марина",phone_number:"+7 941 123 21 42",subordinates:[]},{id:2,name:"Петр",phone_number:"+7 941 123 21 42",subordinates:[]},{id:3,name:"Алексей",phone_number:"+7 941 123 21 42",subordinates:[{id:4,name:"Иван",phone_number:"+7 941 123 21 42",subordinates:[{id:5,name:"Василий",phone_number:"+7 941 123 21 42",subordinates:[]}]}]},{id:6,name:"Борис",phone_number:"+7 941 123 21 42",subordinates:[]}]}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Table",{attrs:{usersData:this.usersData}})],1)},staticRenderFns:[]};var C=a("VU/8")(f,v,!1,function(t){a("uGvy")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:C},template:"<App/>"})},ibF9:function(t,e){},uGvy:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0aaeb2ffd05ebb4458a9.js.map